<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Vállgazd</title>
<style>
  :root{
    --bg:#0f172a; --card:#111827; --muted:#9ca3af; --ok:#10b981; --err:#ef4444; --pri:#60a5fa;
    --ink:#e5e7eb; --ink2:#cbd5e1; --chip:#1f2937;
  }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
  .wrap{max-width:980px;margin:24px auto;padding:0 16px}
  .card{background:var(--card);border:1px solid #1f2937;border-radius:14px;padding:18px 18px 8px 18px;box-shadow:0 10px 30px rgba(0,0,0,.25);margin-bottom:18px}
  .h1{font-size:26px;font-weight:800;margin:2px 0 14px}
  .h2{font-size:18px;color:var(--ink2);margin:0 0 10px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .btn{appearance:none;border:1px solid #334155;background:#0b1220;color:var(--ink);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn:hover{border-color:#475569;background:#0c1a33}
  .btn.primary{background:linear-gradient(180deg,#1d4ed8,#1e40af);border-color:#1e3a8a}
  .btn.ghost{background:transparent;border-color:#334155}
  .btn.small{padding:6px 10px;font-size:13px}
  .meta{color:var(--muted);font-size:13px}
  .q{margin:8px 0 10px}
  .opt{display:flex;gap:8px;align-items:flex-start;padding:8px 10px;border-radius:10px;border:1px solid #1f2937;background:#0a1324;margin:6px 0}
  .opt input{margin-top:2px}
  .opt.correct{border-color:rgba(16,185,129,.6);background:rgba(16,185,129,.08)}
  .opt.incorrect{border-color:rgba(239,68,68,.6);background:rgba(239,68,68,.08)}
  .pill{display:inline-block;background:var(--chip);border:1px solid #334155;color:var(--ink2);font-size:12px;border-radius:999px;padding:3px 9px;margin-right:6px}
  .footer{display:flex;justify-content:space-between;align-items:center;margin-top:16px;border-top:1px dashed #334155;padding-top:10px}
  input[type="text"]{width:100%;padding:10px;border-radius:10px;border:1px solid #1f2937;background:#0b1220;color:var(--ink)}
  .score{font-size:18px;font-weight:800}
  .tag{font-size:12px;color:#93c5fd}
  .hidden{display:none}
  .tabs .btn.active{border-color:#1e3a8a; background:#0c1a33}
  .list-item{padding:8px;border-bottom:1px dashed #334155}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="h1">Váálagzd gyakorló teszt</div>
    <div class="row tabs" style="margin-top:10px">
      <button id="startBtn" class="btn primary" type="button">Új teszt indítása (20 véletlen kérdés)</button>
      <button id="showAllBtn" class="btn ghost" type="button">Összes kérdés listázása (tanuláshoz)</button>
      <button id="unseenTabBtn" class="btn ghost" type="button">Még nem tanult kérdéseim</button>
      <button id="mistakesTabBtn" class="btn ghost" type="button">Hibáim (rossz válaszok)</button>
    </div>
  </div>

  <div id="testContainer"></div>

  <div id="resultCard" class="card hidden">
    <div class="h1">Eredmény</div>
    <div id="scoreLine" class="score"></div>
    <div id="detailLine" class="meta" style="margin-top:6px"></div>
    <div class="row" style="margin-top:12px; flex-wrap:wrap; gap:10px;">
      <button class="btn primary" id="restartBtn" type="button">Új, véletlen 20 kérdés</button>
      <button class="btn" id="reviewBtn" type="button">Összes (aktuális) kérdés megoldásának mutatása</button>
      <button class="btn ghost" id="resultPracticeMistakesBtn" type="button">Hibáim tanulása ()</button>
    </div>
  </div>

  <div id="bulkCard" class="card hidden">
    <div class="h2">Gyors ellenőrzés és gyakorlás</div>
    <div class="meta">Ezekkel gyorsan újratanulhatod a hibáidat.</div>
    <div class="row" style="margin-top:10px; flex-wrap:wrap; gap:12px;">
      <button class="btn ghost" id="practiceMistakesBtn" type="button">Hibáim tanulása (10 véletlen kérdés)</button>
      <button class="btn" id="practiceMistakesAll" type="button">Összes hibám gyakorlása</button>
    </div>
  </div>

  <!-- Hibáim -->
  <div id="mistakesCard" class="card hidden">
    <div class="h2">Hibáim – gyakorló lista</div>
    <div class="meta" id="mistakesMeta">Még nincs rögzített hibád.</div>
    <div class="row" style="margin:10px 0">
      <button id="practiceMistakes10" class="btn" type="button">Gyakorlás a hibáimból (10)</button>
      <button id="practiceMistakes20" class="btn" type="button">Gyakorlás a hibáimból (30)</button>
      <button id="clearMistakesBtn" class="btn ghost" type="button">Hibalista törlése</button>
    </div>
    <div id="mistakesList"></div>
  </div>

  <!-- Még nem tanult -->
  <div id="unseenCard" class="card hidden">
    <div class="h2">Még nem tanult kérdéseim</div>
    <div class="meta" id="unseenMeta">Betöltés…</div>
    <div class="row" style="margin:10px 0">
      <button id="practiceUnseen10" class="btn" type="button">Gyakorlás (10 véletlen)</button>
      <button id="practiceUnseen20" class="btn" type="button">Gyakorlás (80 véletlen)</button>
      <button id="clearSeenBtn" class="btn ghost" type="button">„Megnézettek” törlése</button>
    </div>
    <div id="unseenList"></div>
  </div>
</div>

<script>
 
const QUESTION_BANK =[
  { id:"targy-tf-001", type:"mcq", multi:false, topic:"Tárgyi eszköz gazdálkodás", text:"A tárgyi eszközök fokozatosan, több részben adják át értéküket az általuk előállított termékeknek.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-tf-002", type:"mcq", multi:false, topic:"Tárgyi eszköz gazdálkodás", text:"A tárgyi eszközök teljes mértékben mobilak, könnyen áthelyezhetők más vállalkozásokhoz.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-tf-003", type:"mcq", multi:false, topic:"Tárgyi eszközök csoportosítása", text:"A tárgyi eszközök közé tartoznak az ingatlanok, gépek, berendezések és tenyészállatok.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-tf-004", type:"mcq", multi:false, topic:"Tárgyi eszközök csoportosítása", text:"A tárgyi eszközök rendeltetés szerint csak üzletkörön belüliek lehetnek.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-tf-005", type:"mcq", multi:false, topic:"Beruházások", text:"A beruházás jövőbeni eredmény elérése érdekében történő megelőlegezett áldozatvállalás.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-tf-006", type:"mcq", multi:false, topic:"Beruházások", text:"A beruházás mindig üzembe helyezett tárgyi eszközt jelent.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-mc-001", type:"mcq", multi:true, topic:"Beruházások", text:"Melyek a beruházások fő típusai összefüggés szerint?", options:["Alapberuházás","Járulékos beruházás","Kapcsolódó beruházás","Támogatott beruházás"], correct:[0,1,2] },
  { id:"targy-mc-002", type:"mcq", multi:true, topic:"Beruházások", text:"Milyen módon valósulhat meg egy beruházás?", options:["Megbízásos","Saját kivitelezésű","Vegyes","Állami kötelező"], correct:[0,1,2] },
  { id:"targy-tf-007", type:"mcq", multi:false, topic:"Beruházások", text:"A beruházás forrásai között szerepelhet a lízing is.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-tf-008", type:"mcq", multi:false, topic:"Beruházások", text:"A beruházás csak saját forrásból finanszírozható.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-tf-009", type:"mcq", multi:false, topic:"Tárgyi eszközök élettartama", text:"A tárgyi eszköz normatív élettartama figyelembe veszi a gazdasági avulást.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-tf-010", type:"mcq", multi:false, topic:"Tárgyi eszközök élettartama", text:"A tényleges működési időtartam mindig hosszabb, mint a normatív élettartam.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-mc-003", type:"mcq", multi:true, topic:"Tárgyi eszköz megválasztása", text:"Mely tényezők befolyásolják egy tárgyi eszköz megválasztását?", options:["Üzemeltetési költségek","Meghibásodás esélye","Karbantarthatóság","Piaci versenytársak száma"], correct:[0,1,2] },
  { id:"targy-tf-011", type:"mcq", multi:false, topic:"Tárgyi eszköz értékelése", text:"A tárgyi eszközök értékelésének egyik módja a könyv szerinti érték.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-mc-004", type:"mcq", multi:true, topic:"Tárgyi eszköz értékelése", text:"Melyek a tárgyi eszközök értékelésének fő módszerei?", options:["Könyv szerinti érték","Újrabeszerzési érték","Hozamok tőkésített értéke","Piaci kamatláb"], correct:[0,1,2] },
  { id:"targy-tf-012", type:"mcq", multi:false, topic:"Karbantartás", text:"A reaktív karbantartás célja a meghibásodás megelőzése.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-tf-013", type:"mcq", multi:false, topic:"Karbantartás", text:"A prediktív karbantartás a meghibásodás előrejelzésén alapul.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-mc-005", type:"mcq", multi:true, topic:"Karbantartás", text:"Melyek tartoznak a tárgyi eszközök karbantartási típusai közé?", options:["Reaktív","Preventív","Proaktív","Prediktív"], correct:[0,1,2,3] },
  { id:"targy-tf-014", type:"mcq", multi:false, topic:"Kapacitásmenedzsment", text:"A kapacitásmenedzsment célja, hogy a kapacitás összhangban legyen a piaci igényekkel.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-mc-006", type:"mcq", multi:true, topic:"Kapacitásmenedzsment", text:"Milyen eszközökkel lehet módosítani a termelési kapacitást?", options:["Műszakrend változtatása","Munkaórák módosítása","Termékjellemzők módosítása","Kötelező leállás"], correct:[0,1,2] },
  { id:"targy-tf-015", type:"mcq", multi:false, topic:"Igénymenedzsment", text:"Az igénymenedzsment célja, hogy a piaci igények alkalmazkodjanak a kapacitáshoz.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-mc-007", type:"mcq", multi:true, topic:"Igénymenedzsment", text:"Milyen eszközökkel lehet befolyásolni a keresletet?", options:["Árpolitika","Marketing","Előrendelés","Termelés kiszervezése"], correct:[0,1,2] },
  { id:"targy-tf-016", type:"mcq", multi:false, topic:"Amortizáció", text:"Az amortizáció a tárgyi eszközök értékének fokozatos csökkenése.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-mc-008", type:"mcq", multi:true, topic:"Amortizáció", text:"Melyek az amortizáció fő funkciói?", options:["Értékátvitel","Pótlási alap képzése","Bővítés finanszírozása","Jövedelemszabályozás"], correct:[0,1,2,3] },
  { id:"targy-tf-017", type:"mcq", multi:false, topic:"Amortizáció", text:"A teljesítményarányos amortizáció az idő múlásán alapul.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-mc-009", type:"mcq", multi:true, topic:"Amortizáció", text:"Melyek az időarányos amortizáció típusai?", options:["Lineáris","Degresszív","Progresszív","Teljesítményarányos"], correct:[0,1,2] },
  { id:"targy-tf-018", type:"mcq", multi:false, topic:"Selejtezés", text:"A selejtezés egyik célja a felesleges eszközök azonosítása és eltávolítása.", options:["Igaz","Hamis"], correct:[0] },
  { id:"targy-tf-019", type:"mcq", multi:false, topic:"Selejtezés", text:"A feleslegessé vált eszközöket minden esetben meg kell semmisíteni.", options:["Igaz","Hamis"], correct:[1] },
  { id:"targy-mc-010", type:"mcq", multi:true, topic:"Selejtezés", text:"Mely szempontokat kell figyelembe venni a selejtezés során?", options:["Feleslegessé válás okai","Tárolás és nyilvántartás","Értékesíthetőség","Megsemmisítés költsége"], correct:[0,1,2,3] }
];
QUESTION_BANK.push(
  { id:"vagyon-tf-001", type:"mcq", multi:false, topic:"Vállalat fogalma", text:"A vállalat olyan önállóan gazdálkodó szervezeti alapegység, amely kockázatot vállalva nyereségnövekedésre és tőkegyarapításra törekszik.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-002", type:"mcq", multi:false, topic:"Ipar 1.0–4.0", text:"Az ipar 1.0 a digitalizáció és az internet alapú termelés korszaka.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-tf-003", type:"mcq", multi:false, topic:"Ipar 2.0", text:"Az ipar 2.0 korszaka a tömeggyártás és az elektromosság elterjedéséhez köthető.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-004", type:"mcq", multi:false, topic:"Ipar 3.0", text:"Az ipar 3.0 korszakát a számítógépek és az információtechnológia fejlődése jellemzi.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-005", type:"mcq", multi:false, topic:"Ipar 4.0", text:"Az ipar 4.0 alapja a digitalizáció és az adatvezérelt működés.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-001", type:"mcq", multi:true, topic:"Ipari forradalmak", text:"Mely korszakok tartoznak az ipari forradalmak fő szakaszai közé?", options:["Ipar 1.0","Ipar 2.0","Ipar 3.0","Ipar 4.0"], correct:[0,1,2,3] },
  { id:"vagyon-tf-006", type:"mcq", multi:false, topic:"Vállalat érintettjei", text:"A vállalat érintettjei közé tartoznak a tulajdonosok, a dolgozók és a vásárlók is.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-002", type:"mcq", multi:true, topic:"Vállalat érintettjei", text:"Kik tartoznak a vállalat érintettjei közé?", options:["Állam","Versenytársak","Környezet","Tőzsdei brókerek"], correct:[0,1,2] },
  { id:"vagyon-tf-007", type:"mcq", multi:false, topic:"Vállalat méretek", text:"A mikrovállalkozások legfeljebb 9 főt foglalkoztatnak.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-008", type:"mcq", multi:false, topic:"KKV fogalma", text:"A KKV-k belső bürokráciája általában kicsi, a döntéshozatal gyors.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-009", type:"mcq", multi:false, topic:"KKV szerepe", text:"A KKV-k csekély hatással vannak a nemzetgazdaságra.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-003", type:"mcq", multi:true, topic:"KKV jellemzők", text:"Melyek a kis- és középvállalkozások jellemzői?", options:["Gyors döntéshozatal","Kis bürokrácia","Nagy tőkeellátottság","Innovativitás"], correct:[0,1,3] },
  { id:"vagyon-tf-010", type:"mcq", multi:false, topic:"Innováció", text:"Az innováció új termék, eljárás, piac vagy szervezet létrehozását jelentheti.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-011", type:"mcq", multi:false, topic:"Innováció", text:"Az innováció kizárólag kutatás-fejlesztési tevékenységet jelent.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-004", type:"mcq", multi:true, topic:"Innovációs lánc", text:"Mely elemek tartoznak az innovációs láncba?", options:["Ötlet","Kutatás-fejlesztés","Termelés","Értékesítés"], correct:[0,1,2,3] },
  { id:"vagyon-tf-012", type:"mcq", multi:false, topic:"Egyéni vállalkozás", text:"Az egyéni vállalkozó a saját döntéseiért teljes mértékben felel.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-013", type:"mcq", multi:false, topic:"Egyéni vállalkozás", text:"Az egyéni vállalkozás előnye a nagy tőkeellátottság és a felelősség megoszthatósága.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-005", type:"mcq", multi:true, topic:"Egyéni vállalkozás", text:"Melyek az egyéni vállalkozás előnyei?", options:["Gyors reagálás","Kis tőkeigény","A tulajdonos kapja a profitot","Korlátolt felelősség"], correct:[0,1,2] },
  { id:"vagyon-tf-014", type:"mcq", multi:false, topic:"Vállalkozás bukása", text:"Az új KKV-k gyakran a vezetői tudás hiánya miatt buknak meg.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-015", type:"mcq", multi:false, topic:"Vállalkozás bukása", text:"A tapasztalatlanság nem tartozik a vállalkozások bukásának okai közé.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-006", type:"mcq", multi:true, topic:"Bukási okok", text:"Melyek lehetnek a vállalkozás megbukásának okai?", options:["Magas üzemeltetési költségek","Gyenge versenyképesség","Tapasztalatlanság","Túlzott tőketartalék"], correct:[0,1,2] },
  { id:"vagyon-tf-016", type:"mcq", multi:false, topic:"Vállalkozás vásárlás", text:"Meglévő vállalkozás vásárlása esetén a profit gyorsabban elérhető lehet, mint új alapításnál.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-007", type:"mcq", multi:true, topic:"Vállalkozás vásárlása", text:"Mit érdemes megvizsgálni vállalkozásvásárlás előtt?", options:["Miért adja el a tulajdonos?","Az alkalmazottak képzettségét","Az eladó jövőbeli terveit","Az eladó családi hátterét"], correct:[0,1,2] },
  { id:"vagyon-tf-017", type:"mcq", multi:false, topic:"Vállalkozás vagyona", text:"A vállalkozás forrásai közé tartoznak a saját és idegen források is.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-018", type:"mcq", multi:false, topic:"Vállalkozás vagyona", text:"A befektetett eszközök rövid távon hasznosulnak a vállalkozás működésében.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-008", type:"mcq", multi:true, topic:"Eszközcsoportok", text:"Melyek tartoznak a vállalkozás befektetett eszközei közé?", options:["Immateriális javak","Tárgyi eszközök","Befektetett pénzügyi eszközök","Készletek"], correct:[0,1,2] },
  { id:"vagyon-tf-019", type:"mcq", multi:false, topic:"Forgóeszközök", text:"A készletek, követelések és pénzeszközök a forgóeszközök közé tartoznak.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-020", type:"mcq", multi:false, topic:"Kft. alapítása", text:"Egy Kft. alapításakor az eszközök és források összesített értéke mindig megegyezik.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-009", type:"mcq", multi:true, topic:"Kft. eszköz-forrás", text:"Mely tételek szerepelnek egy Kft. alapításának eszközoldalán?", options:["Tárgyi eszközök","Immateriális javak","Követelések","Készletek","Pénzeszközök"], correct:[0,1,4] },
  { id:"vagyon-mc-010", type:"mcq", multi:true, topic:"Kft. források", text:"Mely tételek tartozhatnak a Kft. forrásai közé?", options:["Saját tőke","Kötelezettségek","Készletek","Értékpapírok"], correct:[0,1] }
);
QUESTION_BANK.push(
  { id:"vagyon-tf-001", type:"mcq", multi:false, topic:"Vállalat fogalma", text:"A vállalat olyan önállóan gazdálkodó szervezeti alapegység, amely kockázatot vállalva nyereségnövekedésre és tőkegyarapításra törekszik.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-002", type:"mcq", multi:false, topic:"Ipar 1.0–4.0", text:"Az ipar 1.0 a digitalizáció és az internet alapú termelés korszaka.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-tf-003", type:"mcq", multi:false, topic:"Ipar 2.0", text:"Az ipar 2.0 korszaka a tömeggyártás és az elektromosság elterjedéséhez köthető.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-004", type:"mcq", multi:false, topic:"Ipar 3.0", text:"Az ipar 3.0 korszakát a számítógépek és az információtechnológia fejlődése jellemzi.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-005", type:"mcq", multi:false, topic:"Ipar 4.0", text:"Az ipar 4.0 alapja a digitalizáció és az adatvezérelt működés.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-001", type:"mcq", multi:true, topic:"Ipari forradalmak", text:"Mely korszakok tartoznak az ipari forradalmak fő szakaszai közé?", options:["Ipar 1.0","Ipar 2.0","Ipar 3.0","Ipar 4.0"], correct:[0,1,2,3] },
  { id:"vagyon-tf-006", type:"mcq", multi:false, topic:"Vállalat érintettjei", text:"A vállalat érintettjei közé tartoznak a tulajdonosok, a dolgozók és a vásárlók is.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-002", type:"mcq", multi:true, topic:"Vállalat érintettjei", text:"Kik tartoznak a vállalat érintettjei közé?", options:["Állam","Versenytársak","Környezet","Tőzsdei brókerek"], correct:[0,1,2] },
  { id:"vagyon-tf-007", type:"mcq", multi:false, topic:"Vállalat méretek", text:"A mikrovállalkozások legfeljebb 9 főt foglalkoztatnak.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-008", type:"mcq", multi:false, topic:"KKV fogalma", text:"A KKV-k belső bürokráciája általában kicsi, a döntéshozatal gyors.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-009", type:"mcq", multi:false, topic:"KKV szerepe", text:"A KKV-k csekély hatással vannak a nemzetgazdaságra.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-003", type:"mcq", multi:true, topic:"KKV jellemzők", text:"Melyek a kis- és középvállalkozások jellemzői?", options:["Gyors döntéshozatal","Kis bürokrácia","Nagy tőkeellátottság","Innovativitás"], correct:[0,1,3] },
  { id:"vagyon-tf-010", type:"mcq", multi:false, topic:"Innováció", text:"Az innováció új termék, eljárás, piac vagy szervezet létrehozását jelentheti.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-011", type:"mcq", multi:false, topic:"Innováció", text:"Az innováció kizárólag kutatás-fejlesztési tevékenységet jelent.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-004", type:"mcq", multi:true, topic:"Innovációs lánc", text:"Mely elemek tartoznak az innovációs láncba?", options:["Ötlet","Kutatás-fejlesztés","Termelés","Értékesítés"], correct:[0,1,2,3] },
  { id:"vagyon-tf-012", type:"mcq", multi:false, topic:"Egyéni vállalkozás", text:"Az egyéni vállalkozó a saját döntéseiért teljes mértékben felel.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-013", type:"mcq", multi:false, topic:"Egyéni vállalkozás", text:"Az egyéni vállalkozás előnye a nagy tőkeellátottság és a felelősség megoszthatósága.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-005", type:"mcq", multi:true, topic:"Egyéni vállalkozás", text:"Melyek az egyéni vállalkozás előnyei?", options:["Gyors reagálás","Kis tőkeigény","A tulajdonos kapja a profitot","Korlátolt felelősség"], correct:[0,1,2] },
  { id:"vagyon-tf-014", type:"mcq", multi:false, topic:"Vállalkozás bukása", text:"Az új KKV-k gyakran a vezetői tudás hiánya miatt buknak meg.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-015", type:"mcq", multi:false, topic:"Vállalkozás bukása", text:"A tapasztalatlanság nem tartozik a vállalkozások bukásának okai közé.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-006", type:"mcq", multi:true, topic:"Bukási okok", text:"Melyek lehetnek a vállalkozás megbukásának okai?", options:["Magas üzemeltetési költségek","Gyenge versenyképesség","Tapasztalatlanság","Túlzott tőketartalék"], correct:[0,1,2] },
  { id:"vagyon-tf-016", type:"mcq", multi:false, topic:"Vállalkozás vásárlás", text:"Meglévő vállalkozás vásárlása esetén a profit gyorsabban elérhető lehet, mint új alapításnál.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-007", type:"mcq", multi:true, topic:"Vállalkozás vásárlása", text:"Mit érdemes megvizsgálni vállalkozásvásárlás előtt?", options:["Miért adja el a tulajdonos?","Az alkalmazottak képzettségét","Az eladó jövőbeli terveit","Az eladó családi hátterét"], correct:[0,1,2] },
  { id:"vagyon-tf-017", type:"mcq", multi:false, topic:"Vállalkozás vagyona", text:"A vállalkozás forrásai közé tartoznak a saját és idegen források is.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-018", type:"mcq", multi:false, topic:"Vállalkozás vagyona", text:"A befektetett eszközök rövid távon hasznosulnak a vállalkozás működésében.", options:["Igaz","Hamis"], correct:[1] },
  { id:"vagyon-mc-008", type:"mcq", multi:true, topic:"Eszközcsoportok", text:"Melyek tartoznak a vállalkozás befektetett eszközei közé?", options:["Immateriális javak","Tárgyi eszközök","Befektetett pénzügyi eszközök","Készletek"], correct:[0,1,2] },
  { id:"vagyon-tf-019", type:"mcq", multi:false, topic:"Forgóeszközök", text:"A készletek, követelések és pénzeszközök a forgóeszközök közé tartoznak.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-tf-020", type:"mcq", multi:false, topic:"Kft. alapítása", text:"Egy Kft. alapításakor az eszközök és források összesített értéke mindig megegyezik.", options:["Igaz","Hamis"], correct:[0] },
  { id:"vagyon-mc-009", type:"mcq", multi:true, topic:"Kft. eszköz-forrás", text:"Mely tételek szerepelnek egy Kft. alapításának eszközoldalán?", options:["Tárgyi eszközök","Immateriális javak","Követelések","Készletek","Pénzeszközök"], correct:[0,1,4] },
  { id:"vagyon-mc-010", type:"mcq", multi:true, topic:"Kft. források", text:"Mely tételek tartozhatnak a Kft. forrásai közé?", options:["Saját tőke","Kötelezettségek","Készletek","Értékpapírok"], correct:[0,1] }
);
QUESTION_BANK.push(
  { id:"uzlettv-tf-001", type:"mcq", multi:false, topic:"Stratégia", text:"A stratégia hosszabb távra szól, mint az üzleti terv.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-002", type:"mcq", multi:false, topic:"Stratégia", text:"A stratégia általában 1 évre szól.", options:["Igaz","Hamis"], correct:[1] },
  { id:"uzlettv-tf-003", type:"mcq", multi:false, topic:"Üzleti terv", text:"Az üzleti terv jellemzően rövid-középtávra, kb. 1 évre szól.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-004", type:"mcq", multi:false, topic:"Stratégia vs. üzleti terv", text:"A stratégiai tervezés mindig rövid távú és számszerűen kifejezett.", options:["Igaz","Hamis"], correct:[1] },
  { id:"uzlettv-tf-005", type:"mcq", multi:false, topic:"Mesterköltségvetés", text:"A mesterköltségvetés a stratégiai tervek és a megvalósítási programok számszerűsített formája.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-mc-001", type:"mcq", multi:true, topic:"Kulcsváltozók", text:"Mely tényezők befolyásolhatják a vállalati kulcsváltozókat?", options:["Hirdetési szint","Infláció","Verseny","Dolgozói létszám"], correct:[0,1,2] },
  { id:"uzlettv-tf-006", type:"mcq", multi:false, topic:"Költségvetés fogalma", text:"A költségvetés egy szervezet számokban kifejezett feladata a tervezett tevékenységekhez.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-007", type:"mcq", multi:false, topic:"Költségvetés szerepe", text:"A költségvetés nem alkalmas arra, hogy jelezze az eltéréseket a tervekhez képest.", options:["Igaz","Hamis"], correct:[1] },
  { id:"uzlettv-tf-008", type:"mcq", multi:false, topic:"Tervezési fázis", text:"A költségvetés készítésének első fázisa a tervezés.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-009", type:"mcq", multi:false, topic:"Ellenőrzési fázis", text:"A költségvetés ellenőrzési fázisa a visszacsatolás és a korrekció szakasza.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-mc-002", type:"mcq", multi:true, topic:"Költségvetés részei", text:"Mely elemek tartoznak a vállalati mesterköltségvetéshez?", options:["Értékesítési terv","Termelési terv","Beszerzési terv","Pénzforgalmi előrejelzés"], correct:[0,1,2,3] },
  { id:"uzlettv-tf-010", type:"mcq", multi:false, topic:"Mesterköltségvetés", text:"A mesterköltségvetés több résztervből épül fel, például értékesítési, termelési és pénzügyi tervből.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-011", type:"mcq", multi:false, topic:"Dekoratőr Álma ZRt.", text:"A gyártási tervben a zárókészlet általában a következő hónap értékesítésének 60%-a.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-012", type:"mcq", multi:false, topic:"Beszerzési terv", text:"A beszerzési terv a szükséges anyagok és nyersanyagok mennyiségét és értékét tartalmazza.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-013", type:"mcq", multi:false, topic:"Személyi költségterv", text:"A személyi jellegű költségek között a közvetlen és közvetett bérek, valamint jutalékok is szerepelnek.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-014", type:"mcq", multi:false, topic:"Beruházási terv", text:"A beruházási terv szoros kapcsolatban áll a mesterköltségvetéssel, mert pénzkiadással jár.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-015", type:"mcq", multi:false, topic:"Üzemi általános költség", text:"Az üzemi általános költség terv a gyártáshoz közvetlenül kapcsolódó költségeket tartalmazza.", options:["Igaz","Hamis"], correct:[1] },
  { id:"uzlettv-tf-016", type:"mcq", multi:false, topic:"Vállalati általános költség", text:"A vállalati általános költségek között szerepelnek az adminisztrációs és értékesítési költségek is.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-017", type:"mcq", multi:false, topic:"Készpénzforgalmi előrejelzés", text:"A készpénzforgalmi előrejelzés a vállalat várható pénzbevételeit és kiadásait tartalmazza.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-mc-003", type:"mcq", multi:true, topic:"Finanszírozási források", text:"Milyen finanszírozási módokat tartalmazhat a költségvetés?", options:["Kölcsönfelvétel","Tőkeemelés","Befektetés értékesítése","Osztalékfizetés"], correct:[0,1,2,3] },
  { id:"uzlettv-tf-018", type:"mcq", multi:false, topic:"Üzleti terv funkciói", text:"Az üzleti terv egyik funkciója, hogy segít a vállalat teljesítményének értékelésében.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-019", type:"mcq", multi:false, topic:"Üzleti terv célja", text:"Az üzleti terv kizárólag pénzügyi befektetők számára készül.", options:["Igaz","Hamis"], correct:[1] },
  { id:"uzlettv-tf-020", type:"mcq", multi:false, topic:"Üzleti terv olvasói", text:"Az üzleti tervet a vállalatvezetésen kívül a hitelezők és befektetők is olvassák.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-021", type:"mcq", multi:false, topic:"Belső vs külső terv", text:"A külső használatú üzleti terv rövidebb és tömörebb, mint a belső.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-022", type:"mcq", multi:false, topic:"Üzleti terv részei", text:"Az üzleti terv tíz fő részből áll, például pénzügyi tervből, marketing tervből és mellékletekből.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-mc-004", type:"mcq", multi:true, topic:"Üzleti terv tartalma", text:"Mely részek tartoznak az üzleti terv felépítésébe?", options:["Vezetői összefoglaló","Marketing terv","Gyártási terv","Mérlegkimutatás"], correct:[0,1,2,3] },
  { id:"uzlettv-tf-023", type:"mcq", multi:false, topic:"Vezetői összefoglaló", text:"A vezetői összefoglalót a teljes üzleti terv elkészítése után érdemes megírni.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-024", type:"mcq", multi:false, topic:"Pénzügyi terv", text:"A pénzügyi terv célja a vállalkozás tervezett pénzügyi teljesítményének bemutatása.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-mc-005", type:"mcq", multi:true, topic:"Pénzügyi terv tartalma", text:"Mely dokumentumokat tartalmazhat a pénzügyi terv?", options:["Eredménykimutatás","Cash-flow kimutatás","Mérleg","Titoktartási nyilatkozat"], correct:[0,1,2] },
  { id:"uzlettv-tf-025", type:"mcq", multi:false, topic:"Mellékletek", text:"Az üzleti terv mellékletei között szerepelhetnek önéletrajzok és konkurenciaanalízis is.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-026", type:"mcq", multi:false, topic:"Marketing terv", text:"A marketing tervben a vállalat meghatározza, hogyan reagál a piac kihívásaira.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-027", type:"mcq", multi:false, topic:"Gyártási terv", text:"A gyártási terv tartalmazza a termelési folyamatokat és az alkalmazott eljárásokat.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-028", type:"mcq", multi:false, topic:"Szervezeti felépítés", text:"A szervezeti felépítés a vállalat irányítási és döntési struktúráját mutatja be.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-029", type:"mcq", multi:false, topic:"Tőke és struktúra", text:"A tőke struktúrája bemutatja a vállalkozás pénzügyi forrásainak összetételét.", options:["Igaz","Hamis"], correct:[0] },
  { id:"uzlettv-tf-030", type:"mcq", multi:false, topic:"Titkos dokumentum", text:"Az üzleti terv titkos dokumentum, amely csak a vállalaton belül használható.", options:["Igaz","Hamis"], correct:[1] }
);
QUESTION_BANK.push(
  // --- Tárgyi eszköz-gazdálkodás ---
  { id:"fill-001", type:"fill", topic:"Tárgyi eszköz gazdálkodás", text:"A tárgyi eszközök értéküket fokozatosan adják át a termékeknek, ezt nevezzük _____.", correct:["amortizáció"] },
  { id:"fill-002", type:"fill", topic:"Tárgyi eszköz gazdálkodás", text:"A tárgyi eszközök közé tartoznak az ingatlanok, gépek, berendezések és _____.", correct:["tenyészállatok"] },
  { id:"fill-003", type:"fill", topic:"Beruházások", text:"A beruházás jövőbeni eredmény elérése érdekében történő _____ áldozatvállalás.", correct:["megelőlegezett"] },
  { id:"fill-004", type:"fill", topic:"Beruházások", text:"A beruházások finanszírozása történhet saját forrásból, hitelből vagy _____.", correct:["lízingből"] },
  { id:"fill-005", type:"fill", topic:"Amortizáció", text:"Az amortizáció célja, hogy a tárgyi eszközök értékcsökkenését _____ módon elszámolja.", correct:["rendszeres"] },
  { id:"fill-006", type:"fill", topic:"Amortizáció", text:"Az időarányos amortizáció leggyakoribb típusa a _____ leírás.", correct:["lineáris"] },
  { id:"fill-007", type:"fill", topic:"Karbantartás", text:"A _____ karbantartás célja a meghibásodások megelőzése és a berendezések állapotának megőrzése.", correct:["preventív"] },
  { id:"fill-008", type:"fill", topic:"Kapacitásmenedzsment", text:"A kapacitásmenedzsment célja, hogy a vállalat kapacitása összhangban legyen a _____ igényekkel.", correct:["piaci"] },
  { id:"fill-009", type:"fill", topic:"Selejtezés", text:"A selejtezés során a feleslegessé vált vagy használhatatlan eszközöket a nyilvántartásból _____.", correct:["kivezetik"] },
  { id:"fill-010", type:"fill", topic:"Tárgyi eszköz értékelése", text:"A tárgyi eszközök könyv szerinti értéke az eszköz bruttó értéke csökkentve az _____ összegével.", correct:["értékcsökkenés"] },

  // --- Vagyongazdálkodás ---
  { id:"fill-011", type:"fill", topic:"Vagyongazdálkodás", text:"A vállalat olyan önállóan gazdálkodó szervezeti egység, amely kockázatot vállalva _____ növekedésre törekszik.", correct:["nyereség"] },
  { id:"fill-012", type:"fill", topic:"Ipar 4.0", text:"Az ipar 4.0 alapja a digitalizáció és az _____ működés.", correct:["adatvezérelt"] },
  { id:"fill-013", type:"fill", topic:"KKV", text:"A kis- és középvállalkozások legfeljebb _____ főt foglalkoztatnak.", correct:["249"] },
  { id:"fill-014", type:"fill", topic:"Innováció", text:"Az innováció új termék, eljárás, piac vagy _____ létrehozását jelentheti.", correct:["szervezet"] },
  { id:"fill-015", type:"fill", topic:"Egyéni vállalkozás", text:"Az egyéni vállalkozó a tevékenységéért _____ felelősséggel tartozik.", correct:["korlátlan"] },
  { id:"fill-016", type:"fill", topic:"Vállalkozás bukása", text:"A legtöbb vállalkozás bukása a _____ hiányából ered.", correct:["vezetői tapasztalat"] },
  { id:"fill-017", type:"fill", topic:"Vállalkozás vásárlása", text:"Meglévő vállalkozás vásárlásakor érdemes megvizsgálni a _____ okát.", correct:["eladás"] },
  { id:"fill-018", type:"fill", topic:"Vállalkozás vagyona", text:"A vállalkozás eszközei és forrásai értékben mindig _____.", correct:["megegyeznek"] },
  { id:"fill-019", type:"fill", topic:"Forgóeszközök", text:"A készletek, követelések és pénzeszközök a vállalkozás _____ körébe tartoznak.", correct:["forgóeszközei"] },
  { id:"fill-020", type:"fill", topic:"Befektetett eszközök", text:"A befektetett eszközök hosszabb, mint _____ évet meghaladóan szolgálják a vállalat működését.", correct:["egy"] },

  // --- Költséggazdálkodás – KMH elemzés ---
  { id:"fill-021", type:"fill", topic:"Költségek", text:"A költség az árbevétel érdekében felhasznált _____ pénzben kifejezett értéke.", correct:["erőforrások"] },
  { id:"fill-022", type:"fill", topic:"Költségnemek", text:"A költségek három fő csoportja: anyagjellegű, személyi jellegű és _____.", correct:["értékcsökkenési leírás"] },
  { id:"fill-023", type:"fill", topic:"Fix költség", text:"A fix költség a tevékenység adott szakaszában _____ marad.", correct:["állandó"] },
  { id:"fill-024", type:"fill", topic:"Közvetlen költség", text:"A közvetlen költségek _____ hozzárendelhetők a termékhez.", correct:["közvetlenül"] },
  { id:"fill-025", type:"fill", topic:"Releváns költség", text:"Releváns költségnek nevezzük azokat, amelyek egy adott _____ hatására változnak.", correct:["döntés"] },
  { id:"fill-026", type:"fill", topic:"Elsüllyedt költség", text:"Az elsüllyedt költségek már megtörténtek, és a jövőben _____ változtathatók.", correct:["nem"] },
  { id:"fill-027", type:"fill", topic:"KMH elemzés", text:"A költség–mennyiség–haszon elemzés célja a költségek, árbevétel és _____ kapcsolatának feltárása.", correct:["nyereség"] },
  { id:"fill-028", type:"fill", topic:"Fedezeti pont", text:"A fedezeti pont az a termelési szint, ahol a bevétel és a költség _____ egymással.", correct:["megegyezik"] },
  { id:"fill-029", type:"fill", topic:"Fedezet", text:"A fedezet az árbevétel és a _____ költségek különbsége.", correct:["változó"] },
  { id:"fill-030", type:"fill", topic:"Működési áttétel", text:"A működési áttétel megmutatja, hogy a fix költségek aránya hogyan hat a vállalat _____.", correct:["kockázatára"] },

  // --- Üzleti terv és stratégia ---
  { id:"fill-031", type:"fill", topic:"Stratégia", text:"A stratégia hosszú távra szóló, _____ célokat meghatározó terv.", correct:["átfogó"] },
  { id:"fill-032", type:"fill", topic:"Üzleti terv", text:"Az üzleti terv a vállalat jövőbeli működését _____ formában mutatja be.", correct:["számszerű"] },
  { id:"fill-033", type:"fill", topic:"Mesterköltségvetés", text:"A mesterköltségvetés több résztervből épül fel, például értékesítési, termelési és _____ tervből.", correct:["pénzügyi"] },
  { id:"fill-034", type:"fill", topic:"Költségvetés", text:"A költségvetés egyik funkciója az _____, amely összeveti a tervet a tényleges adatokkal.", correct:["ellenőrzés"] },
  { id:"fill-035", type:"fill", topic:"Beruházási terv", text:"A beruházási terv a vállalat jövőbeli pénzkiadásait és _____ tartalmazza.", correct:["forrásait"] },
  { id:"fill-036", type:"fill", topic:"Pénzügyi terv", text:"A pénzügyi terv három fő dokumentuma: mérleg, eredménykimutatás és _____.", correct:["cash-flow"] },
  { id:"fill-037", type:"fill", topic:"Marketing terv", text:"A marketing terv meghatározza, hogyan reagál a vállalat a _____ kihívásaira.", correct:["piaci"] },
  { id:"fill-038", type:"fill", topic:"Vezetői összefoglaló", text:"A vezetői összefoglalót az üzleti terv elkészítése _____ célszerű megírni.", correct:["után"] },
  { id:"fill-039", type:"fill", topic:"Tőkeszerkezet", text:"A tőkeszerkezet a vállalat _____ összetételét mutatja be.", correct:["forrásainak"] },
  { id:"fill-040", type:"fill", topic:"Szervezeti felépítés", text:"A szervezeti felépítés bemutatja a vállalat _____ és döntési viszonyait.", correct:["irányítási"] }
);
QUESTION_BANK.push(
  { id:"fill-041", type:"fill", topic:"Tárgyi eszközök", text:"A(z) _____ a tárgyi eszközbe be van építve, azzal össze van szerelve, nélküle rendeltetésszerűen nem használható.", correct:["alkatrész"] },
  { id:"fill-042", type:"fill", topic:"Tárgyi eszközök", text:"Minél gyorsabb a technikai fejlődés, annál gyorsabb az eszköz _____.", correct:["avulása"] },
  { id:"fill-043", type:"fill", topic:"Vállalat fogalma", text:"A vállalat termékek és szolgáltatások kielégítésére, profitszerzés céljából létrejött _____ entitás.", correct:["üzleti"] },
  { id:"fill-044", type:"fill", topic:"Vállalat fogalma", text:"A vállalati dolgozók tevékenysége a társadalom _____ elégíti ki.", correct:["szükségleteit"] },
  { id:"fill-045", type:"fill", topic:"Költségek", text:"A _____ költségek azok, amelyekről nem vagy csak nehezen állapítható meg, melyik költségviselőt terhelik.", correct:["közvetett"] },
  { id:"fill-046", type:"fill", topic:"Költségek", text:"A lejárt költség _____ jelent.", correct:["ráfordítást"] },
  { id:"fill-047", type:"fill", topic:"Költségek", text:"A költség és a _____ nem azonos fogalom.", correct:["kiadás"] },
  { id:"fill-048", type:"fill", topic:"Költségek", text:"A terméket előállító dolgozó túlórapótléka lehet _____ költség.", correct:["közvetlen"] },
  { id:"fill-049", type:"fill", topic:"Költségek", text:"A készletek bekerülési értéke lejárt költség, azaz _____.", correct:["ráfordítás"] },
  { id:"fill-050", type:"fill", topic:"Költségek", text:"Az igazgató túlórára kapott bére mindig _____ költség.", correct:["közvetett"] }
);
QUESTION_BANK.push(
  // --- Többválasztós kérdések a Vállalati gazdaságtan anyagból ---
  { id:"multi-001", type:"multi", topic:"Stratégia", text:"A stratégia általában hány évre szól?", options:["1 évre","max. 5 évre","kb. 5 évre","5–10 évre"], correct:["5–10 évre"] },
  { id:"multi-002", type:"multi", topic:"Üzleti terv", text:"Az üzleti terv általában hány évre szól?", options:["1 évre","max. 5 évre","kb. 5 évre","5–10 évre"], correct:["max. 5 évre"] },
  { id:"multi-003", type:"multi", topic:"Vállalat", text:"Melyik jellemzi legjobban a vállalatot?", options:["Nem kockáztat","Nyereségre törekszik és kockázatot vállal","Csak állami tulajdonú lehet","Nem termel profitot"], correct:["Nyereségre törekszik és kockázatot vállal"] },
  { id:"multi-004", type:"multi", topic:"Ipar 4.0", text:"Mi jellemzi az Ipar 4.0 korszakát?", options:["Gőzgépek elterjedése","Tömeggyártás és elektromosság","Digitalizáció és adatvezérelt rendszerek","Mechanikus fonás"], correct:["Digitalizáció és adatvezérelt rendszerek"] },
  { id:"multi-005", type:"multi", topic:"KKV kategóriák", text:"A KKV-k besorolása az EU szerint milyen szempontok alapján történik?", options:["Alkalmazottak száma, árbevétel, mérlegfőösszeg","Telephely mérete, adótípus, iparág","Tulajdonosok száma, részvények értéke, iparág"], correct:["Alkalmazottak száma, árbevétel, mérlegfőösszeg"] },
  { id:"multi-006", type:"multi", topic:"Vállalkozás formák", text:"Melyik állítás igaz az egyéni vállalkozóra?", options:["Korlátolt felelősségű","Korlátlan felelősségű","Részvénytársaság formában működik","Csak állami támogatással alapítható"], correct:["Korlátlan felelősségű"] },
  { id:"multi-007", type:"multi", topic:"Vállalkozás indítása", text:"Melyik előny az új vállalkozás alapításakor?", options:["Gyors profit","Kisebb kockázat","Teljes önállóság és rugalmasság","Meglévő hírnév"], correct:["Teljes önállóság és rugalmasság"] },
  { id:"multi-008", type:"multi", topic:"Üzleti terv részei", text:"Melyik NEM része az üzleti tervnek?", options:["Marketing terv","Gyártási terv","Adóbevallás","Pénzügyi terv"], correct:["Adóbevallás"] },
  { id:"multi-009", type:"multi", topic:"Mesterköltségvetés", text:"Melyik NEM a mesterköltségvetés része?", options:["Értékesítési terv","Gyártási terv","Beruházási terv","Kutatási beszámoló"], correct:["Kutatási beszámoló"] },
  { id:"multi-010", type:"multi", topic:"Költség fogalma", text:"Melyik állítás helyes a költség fogalmáról?", options:["Mindig pénzkiadást jelent","Csak anyagköltséget tartalmaz","A bevétel érdekében felhasznált erőforrások pénzértéke","Csak a munkabért tartalmazza"], correct:["A bevétel érdekében felhasznált erőforrások pénzértéke"] },
  { id:"multi-011", type:"multi", topic:"Fix és változó költség", text:"Melyik jellemző igaz a fix költségre?", options:["A termelés szintjével arányosan nő","Bizonyos szakaszon állandó marad","Mindig nullára csökken","A bevétellel együtt változik"], correct:["Bizonyos szakaszon állandó marad"] },
  { id:"multi-012", type:"multi", topic:"Releváns költség", text:"Mi a releváns költség?", options:["Ami a döntéstől függetlenül megmarad","Ami egy döntés hatására megváltozik","Mindig fix költség","Mindig anyagköltség"], correct:["Ami egy döntés hatására megváltozik"] },
  { id:"multi-013", type:"multi", topic:"Fedezeti pont", text:"Mit jelent a fedezeti pont?", options:["Amikor az árbevétel meghaladja a költségeket","Amikor a bevétel megegyezik a költséggel","Amikor a vállalat veszteséget termel","Amikor minden költség fix"], correct:["Amikor a bevétel megegyezik a költséggel"] },
  { id:"multi-014", type:"multi", topic:"KMH elemzés", text:"Mit vizsgál a KMH elemzés?", options:["A vállalat marketingtevékenységét","A költségek, mennyiség és haszon kapcsolatát","Az amortizáció típusait","A pénzügyi kimutatások hitelességét"], correct:["A költségek, mennyiség és haszon kapcsolatát"] },
  { id:"multi-015", type:"multi", topic:"Költségszerkezet", text:"Melyik NEM költségnem?", options:["Anyagjellegű","Személyi jellegű","Pénzügyi","Értékcsökkenési"], correct:["Pénzügyi"] },
  { id:"multi-016", type:"multi", topic:"Költségtípus", text:"Mi a különbség a közvetlen és közvetett költség között?", options:["A közvetlen azonnal hozzárendelhető a termékhez, a közvetett nem","A közvetett mindig változó","A közvetlen mindig fix","A közvetett mindig anyagköltség"], correct:["A közvetlen azonnal hozzárendelhető a termékhez, a közvetett nem"] },
  { id:"multi-017", type:"multi", topic:"Amortizáció", text:"Melyik NEM amortizációs módszer?", options:["Lineáris","Degresszív","Progresszív","Kumulatív"], correct:["Kumulatív"] },
  { id:"multi-018", type:"multi", topic:"Üzleti terv funkciója", text:"Mi az üzleti terv egyik fő funkciója?", options:["A vállalat szerződéseinek tárolása","A működés és tervezés koordinálása","Az éves beszámoló kiváltása","A marketingtevékenység titkosítása"], correct:["A működés és tervezés koordinálása"] },
  { id:"multi-019", type:"multi", topic:"Pénzügyi terv", text:"Melyik NEM tartozik a pénzügyi terv részei közé?", options:["Cash-flow","Eredménykimutatás","Mérleg","Reklámterv"], correct:["Reklámterv"] },
  { id:"multi-020", type:"multi", topic:"Innováció", text:"Melyik NEM az innováció lehetséges iránya?", options:["Új termék vagy eljárás","Új szervezet létrehozása","Új nyersanyagforrás","Régi módszerek visszaállítása"], correct:["Régi módszerek visszaállítása"] }
);

const QUESTIONS = QUESTION_BANK;

// ===========================================================================

/* ======= KIS SEGÉDEK ======= */
const shuffle = arr => arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
const pickRandom = (arr, n) => shuffle(arr).slice(0, n);


function normalize(s){
  return (s ?? "")
    .toString()
    .trim()
    .toLowerCase()
    .normalize("NFD")              
    .replace(/[\u0300-\u036f]/g, "") 
    .replace(/\s+/g, " ");           
}
function levenshtein(a, b){
  const m = a.length, n = b.length;
  const dp = Array.from({length: m+1}, () => Array(n+1).fill(0));
  for(let i=0;i<=m;i++) dp[i][0] = i;
  for(let j=0;j<=n;j++) dp[0][j] = j;
  for(let i=1;i<=m;i++){
    for(let j=1;j<=n;j++){
      const cost = a[i-1] === b[j-1] ? 0 : 1;
      dp[i][j] = Math.min(
        dp[i-1][j] + 1,     // törlés
        dp[i][j-1] + 1,     // beszúrás
        dp[i-1][j-1] + cost // csere
      );
    }
  }
  return dp[m][n];
}

function isAcceptable(userInput, accepted){
  const variants = Array.isArray(accepted) ? accepted : String(accepted).split("|");
  const u = normalize(userInput);
  return variants.some(v => {
    const t = normalize(v);
    if (!t) return false;
    if (u === t) return true;
    return levenshtein(u, t) <= 3; 
  });
}


let currentSet = [];
let score = 0;
let answered = 0;

/* ======= LocalStorage kulcsok ======= */
const LS_MISTAKES = "gazdjog_mistakes_min_v1";
const LS_SEEN     = "gazdjog_seen_min_v1";

/* ======= Hibák tárolása ======= */
function loadMistakes(){
  try{
    const raw = localStorage.getItem(LS_MISTAKES);
    const parsed = raw ? JSON.parse(raw) : [];
    const bankIds = new Set(QUESTIONS.map(q=>q.id));
    return parsed.filter(q=>bankIds.has(q.id));
  }catch(e){ return []; }
}
function saveMistakes(list){ localStorage.setItem(LS_MISTAKES, JSON.stringify(list)); }
function removeMistake(id){
  const list = loadMistakes().filter(x => x.id !== id);
  saveMistakes(list);
}
function addMistake(q){
  const list = loadMistakes();
  if(!list.find(x=>x.id===q.id)){ list.push(q); saveMistakes(list); }
}
function clearMistakes(){ saveMistakes([]); }

/* ======= Seen (látott kérdések) ======= */
function loadSeen(){
  try{
    const raw = localStorage.getItem(LS_SEEN);
    const arr = raw ? JSON.parse(raw) : [];
    const bankIds = new Set(QUESTIONS.map(q=>q.id));
    return new Set(arr.filter(id => bankIds.has(id)));
  }catch(e){ return new Set(); }
}
function saveSeen(seenSet){
  localStorage.setItem(LS_SEEN, JSON.stringify([...seenSet]));
}
function addSeen(ids){
  const seen = loadSeen();
  ids.forEach(id => seen.add(id));
  saveSeen(seen);
}
function clearSeen(){ localStorage.removeItem(LS_SEEN); }

/* ======= UI elemek ======= */
const testContainer = document.getElementById('testContainer');
const resultCard = document.getElementById('resultCard');
const scoreLine = document.getElementById('scoreLine');
const detailLine = document.getElementById('detailLine');

const bulkCard = document.getElementById('bulkCard');

const mistakesCard = document.getElementById('mistakesCard');
const mistakesMeta = document.getElementById('mistakesMeta');
const mistakesList = document.getElementById('mistakesList');

const unseenCard = document.getElementById('unseenCard');
const unseenMeta = document.getElementById('unseenMeta');
const unseenList = document.getElementById('unseenList');

/* ======= Helper: Hibaszámláló frissítése a gombon ======= */
function updateResultMistakesBtn(){
  const n = loadMistakes().length;
  const btn1 = document.getElementById('resultPracticeMistakesBtn');
  const btn2 = document.getElementById('practiceMistakesBtn');
  if (btn1) btn1.textContent = `Hibáim tanulása (${n})`;
  if (btn2) btn2.textContent = `Hibáim tanulása (10 véletlen kérdés)`;
}

/* ======= Teszt render ======= */
function renderTest(questions){
  bulkCard?.classList.remove('hidden');
  testContainer.innerHTML = "";

  // lapok elrejtése
  resultCard.classList.add('hidden');
  mistakesCard.classList.add('hidden');
  unseenCard.classList.add('hidden');
  document.querySelectorAll('.tabs .btn').forEach(b=>b.classList.remove('active'));

  score = 0; answered = 0;
  currentSet = questions.slice();

  questions.forEach((q, idx)=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.id = `q-${q.id}`;

    const header = document.createElement('div');
    header.innerHTML = `<div class="row" style="justify-content:space-between">
      <div><span class="pill">${idx+1}. kérdés</span> <span class="tag">${q.topic||""}</span></div>
      <div class="meta">${q.type==="mcq" ? (q.multi? "Több válasz lehetséges":"Egy válasz") : "Kitöltős"}</div>
    </div>`;
    card.appendChild(header);

    const qDiv = document.createElement('div');
    qDiv.className = 'q';
    qDiv.textContent = q.text;
    card.appendChild(qDiv);

    const answersWrap = document.createElement('div');
    if(q.type === "mcq"){
      (q.options||[]).forEach((opt, i)=>{
        const optDiv = document.createElement('label');
        optDiv.className = 'opt';
        const input = document.createElement('input');
        input.type = q.multi ? 'checkbox' : 'radio';
        input.name = `ans-${q.id}`;
        input.value = i;
        optDiv.appendChild(input);
        const span = document.createElement('span');
        span.textContent = " " + ["A)","B)","C)","D)","E)","F)"][i] + " " + opt;
        optDiv.appendChild(span);
        answersWrap.appendChild(optDiv);
      });
    } else {
      const input = document.createElement('input');
      input.type = "text";
      input.placeholder = "Írd be a megoldást…";
      input.id = `fill-${q.id}`;
      answersWrap.appendChild(input);
    }
    card.appendChild(answersWrap);

    const footer = document.createElement('div');
    footer.className = 'footer';
    footer.innerHTML = `<div class="meta" id="fb-${q.id}"></div>
      <div class="row">
        <button class="btn small ghost" data-action="show-solution" data-qid="${q.id}">Megoldás mutatása</button>
        <button class="btn small" data-action="check" data-qid="${q.id}">Ellenőrzés</button>
      </div>`;
    card.appendChild(footer);

    testContainer.appendChild(card);
  });

  updateResultMistakesBtn();
}

/* ======= Kártya gombjai – egyszeri delegálás ======= */
if (!window.__cardsBound){
  testContainer.addEventListener('click', (ev)=>{
    const btn = ev.target.closest('button[data-action]');
    if(!btn) return;
    const qid = btn.getAttribute('data-qid');
    const action = btn.getAttribute('data-action');
    const q = currentSet.find(x=>x.id===qid);
    if(!q) return;

    if(action === "check"){
      handleCheck(q);
    }else if(action === "show-solution"){
      showSolution(q, true);
    }
  });
  window.__cardsBound = true;
}

/* ======= Ellenőrzés / Megoldás ======= */
function handleCheck(q){
  addSeen([q.id]);
  const card = document.getElementById(`q-${q.id}`);
  const fb = document.getElementById(`fb-${q.id}`);
  let isCorrect = false;

  if(q.type==="mcq"){
    const inputs = [...card.querySelectorAll('input[name="ans-'+q.id+'"]')];
    const sel = inputs.filter(i=>i.checked).map(i=>parseInt(i.value,10));
    inputs.forEach(i=>{
      const wrap = i.parentElement;
      const idx = parseInt(i.value,10);
      const good = (q.correct||[]).includes(idx);
      wrap.classList.remove('correct','incorrect');
      if(good) wrap.classList.add('correct');
      if(i.checked && !good) wrap.classList.add('incorrect');
      i.disabled = true;
    });
    sel.sort((a,b)=>a-b);
    const corr = [...(q.correct||[])].sort((a,b)=>a-b);
    isCorrect = JSON.stringify(sel)===JSON.stringify(corr);

  }else{
    const input = card.querySelector('input[type="text"]');
    const given = normalize(input.value);
    const ok = (q.correctText||[]).some(acc=>normalize(acc)===given);

    isCorrect = ok;
    input.disabled = true;
    if(ok){
      input.style.borderColor = "rgba(16,185,129,.8)";
      input.style.background = "rgba(16,185,129,.08)";
    }else{
      input.style.borderColor = "rgba(239,68,68,.8)";
      input.style.background = "rgba(239,68,68,.08)";
      const sol = "Megoldás: " + (q.correctText||[]).join("  |  ");
      const solDiv = document.createElement('div');
      solDiv.className = 'meta';
      solDiv.textContent = sol;
      input.insertAdjacentElement('afterend', solDiv);
    }
  }

  fb.textContent = isCorrect ? "✅ Helyes válasz! +1 pont" : "❌ Nem teljesen jó.";
  if(!card.dataset.done){
    answered++;
    if(isCorrect){ score++; removeMistake(q.id); }
    else{ addMistake(q); }
    card.dataset.done = "1";
    updateResultMistakesBtn();
    if(!mistakesCard.classList.contains('hidden')) renderMistakesView();
  }

  if(answered === currentSet.length) finalizeScore();
}

function showSolution(q){
  addSeen([q.id]);
  const card = document.getElementById(`q-${q.id}`);
  const fb = document.getElementById(`fb-${q.id}`);

  if(q.type==="mcq"){
    const inputs = [...card.querySelectorAll('input[name="ans-'+q.id+'"]')];
    inputs.forEach(i=>{
      const wrap = i.parentElement;
      const idx = parseInt(i.value,10);
      const good = (q.correct||[]).includes(idx);
      wrap.classList.remove('correct','incorrect');
      if(good) wrap.classList.add('correct');
      i.disabled = true;
    });
    fb.textContent = "Megoldás kiemelve zölddel.";
  } else {
    const input = card.querySelector('input[type="text"]');
    input.disabled = true;
    const sol = "Megoldás: " + (q.correctText||[]).join("  |  ");
    if(!card.querySelector('.footer .meta + .meta')){
      const solDiv = document.createElement('div');
      solDiv.className = 'meta';
      solDiv.textContent = sol;
      input.insertAdjacentElement('afterend', solDiv);
    }
    fb.textContent = "Megoldás megjelenítve.";
  }

  if(!card.dataset.done){
    answered++;
    card.dataset.done = "1";
  }
  if(answered === currentSet.length) finalizeScore();
}

function finalizeScore(){
  resultCard.classList.remove('hidden');
  const pct = Math.round((score/currentSet.length)*100);
  scoreLine.textContent = `Pontszám: ${score} / ${currentSet.length}`;
  detailLine.textContent = `Teljesítmény: ${pct}% • Helyes válasz után zöld keret, hibás után piros.`;
}

/* ======= Felső gombok – egyszeri kötés ======= */
if (!window.__topBtnsBound){
  document.getElementById('startBtn').addEventListener('click', ()=>{
    const n = Math.min(50, QUESTIONS.length);
    renderTest(pickRandom(QUESTIONS, n));
  });

  document.getElementById('showAllBtn').addEventListener('click', ()=>{
    renderTest([...QUESTIONS]);
  });

  document.getElementById('restartBtn').addEventListener('click', ()=>{
    const n = Math.min(20, QUESTIONS.length);
    renderTest(pickRandom(QUESTIONS, n));
  });

  document.getElementById('reviewBtn').addEventListener('click', ()=>{
    currentSet.forEach(q=>showSolution(q,true));
  });

  const mistakesTabBtn = document.getElementById('mistakesTabBtn');
  mistakesTabBtn.addEventListener('click', ()=>{
    renderMistakesView();
    mistakesCard.classList.remove('hidden');
    unseenCard.classList.add('hidden');
    resultCard.classList.add('hidden');
    bulkCard.classList.add('hidden');
    testContainer.innerHTML = "";
    document.querySelectorAll('.tabs .btn').forEach(b=>b.classList.remove('active'));
    mistakesTabBtn.classList.add('active');
  });

  const unseenTabBtn = document.getElementById('unseenTabBtn');
  unseenTabBtn.addEventListener('click', ()=>{
    renderUnseenView();
    unseenCard.classList.remove('hidden');
    mistakesCard.classList.add('hidden');
    resultCard.classList.add('hidden');
    bulkCard.classList.add('hidden');
    testContainer.innerHTML = "";
    document.querySelectorAll('.tabs .btn').forEach(b=>b.classList.remove('active'));
    unseenTabBtn.classList.add('active');
  });

  // Csávoka fül – CSAK a Csávoka-bankból származó kérdések
 
}

/* ======= Hibáim lap ======= */
function renderMistakesView(){
  const list = loadMistakes();
  mistakesList.innerHTML = "";
  mistakesMeta.textContent = list.length
    ? `Összes rögzített hibád: ${list.length} db.`
    : "Még nincs rögzített hibád.";
  list.forEach((q, idx)=>{
    const div = document.createElement('div');
    div.className = 'list-item';
    div.innerHTML = `<strong>${idx+1}.</strong> <em>${q.topic||""}</em> — ${q.text}`;
    mistakesList.appendChild(div);
  });
  updateResultMistakesBtn();
}

document.getElementById('practiceMistakes10').addEventListener('click', ()=>{
  const list = loadMistakes();
  if(list.length===0){ alert("Nincs még hibád. Oldj meg pár kérdést előbb!"); return; }
  renderTest(pickRandom(list, Math.min(10, list.length)));
});

document.getElementById('practiceMistakes20').addEventListener('click', ()=>{
  const list = loadMistakes();
  if(list.length===0){ alert("Nincs még hibád. Oldj meg pár kérdést előbb!"); return; }
  renderTest(pickRandom(list, Math.min(20, list.length)));
});

document.getElementById('clearMistakesBtn').addEventListener('click', ()=>{
  if(confirm("Biztosan törlöd az összes rögzített hibát?")){
    clearMistakes();
    renderMistakesView();
  }
});

/* ======= Gyors gyakorló gombok a kártyán ======= */
document.getElementById('practiceMistakesBtn').addEventListener('click', ()=>{
  const mistakes = loadMistakes();
  if(mistakes.length === 0){
    alert("Még nincsenek rögzített hibáid. Oldj meg néhány kérdést előbb!");
    return;
  }
  renderTest(pickRandom(mistakes, Math.min(10, mistakes.length)));
});

document.getElementById('practiceMistakesAll').addEventListener('click', ()=>{
  const list = loadMistakes();
  if (list.length === 0) {
    alert("Nincs még hibád. Oldj meg pár kérdést előbb!");
    return;
  }
  renderTest([...list]);
});

document.getElementById('resultPracticeMistakesBtn').addEventListener('click', ()=>{
  const mistakes = loadMistakes();
  if(mistakes.length === 0){
    alert("Még nincsenek rögzített hibáid. Oldj meg pár kérdést előbb!");
    return;
  }
  renderTest(pickRandom(mistakes, Math.min(20, mistakes.length)));
});

/* ======= UNSEEN (még nem tanult) lap ======= */
function getUnseen(){
  const seen = loadSeen();
  return QUESTIONS.filter(q => !seen.has(q.id));
}
function renderUnseenView(){
  const unseen = getUnseen();
  unseenList.innerHTML = "";
  unseenMeta.textContent = unseen.length
    ? `Még nem tanult kérdések száma: ${unseen.length} db.`
    : "Gratulálok! Minden kérdést legalább egyszer láttál.";
  unseen.forEach((q, idx) => {
    const div = document.createElement('div');
    div.className = 'list-item';
    div.innerHTML = `<strong>${idx+1}.</strong> <em>${q.topic||""}</em> — ${q.text}`;
    unseenList.appendChild(div);
  });
}

document.getElementById('practiceUnseen10').addEventListener('click', ()=>{
  const unseen = getUnseen();
  if (unseen.length===0){ alert("Nincs több új (nem látott) kérdés."); return; }
  renderTest(pickRandom(unseen, Math.min(10, unseen.length)));
});

document.getElementById('practiceUnseen20').addEventListener('click', ()=>{
  const unseen = getUnseen();
  if (unseen.length===0){ alert("Nincs több új (nem látott) kérdés."); return; }
  renderTest(pickRandom(unseen, Math.min(80, unseen.length)));
});

document.getElementById('clearSeenBtn').addEventListener('click', ()=>{
  if (confirm("Törlöd a 'már látott' kérdések listáját?")){
    clearSeen();
    renderUnseenView();
  }
});

/* ======= Init ======= */
updateResultMistakesBtn();
</script>
</body>
</html>

